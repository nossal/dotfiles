#!/usr/bin/env zsh

# autoinstall: zsh "$(curl -fsL http://noss.al/dot)"

DOTFILES_HOME="$HOME/.dotfiles"
LOCAL_BIN_DIR="$HOME/.local/bin"

declare -A files
files=(
  shell/starship.toml .config/starship.toml
  shell/lsd.yaml      .config/lsd/config.yaml
  shell/tmux.conf     .tmux.conf
  zsh/zlogin          .zlogin
  zsh/zprofile        .zprofile
  zsh/zshenv          .zshenv
  zsh/zshrc           .zshrc
  git/gitconfig       .gitconfig
)

function install_dotfiles() {
  git clone https://github.com/nossal/dotfiles "$DOTFILES_HOME"

  for key value in ${(kv)files}; do
      echo ln -s "$DOTFILES_HOME/$key" "$HOME/$value"
  done
}

if [[ -a $DOTFILES_HOME ]]; then
  echo "update DOTFILES"
else
  echo "install DOTFILES"
  install_dotfiles
fi

if [[ ! -a $LOCAL_BIN_DIR ]]; then
  mkdir -p $LOCAL_BIN_DIR
fi

# cp $DOTFILES_HOME/bin/\* $LOCAL_BIN_DIR
